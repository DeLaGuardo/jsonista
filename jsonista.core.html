<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jsonista.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jsonista</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="jsonista.core.html"><div class="inner"><span>jsonista.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jsonista.core.html#var-.2Bdefault-mapper.2B"><div class="inner"><span>+default-mapper+</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-object-mapper"><div class="inner"><span>object-mapper</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-read-value"><div class="inner"><span>read-value</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-ReadValue"><div class="inner"><span>ReadValue</span></div></a></li><li class="depth-2"><a href="jsonista.core.html#var--read-value"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-read-value</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-write-value"><div class="inner"><span>write-value</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-write-value-as-bytes"><div class="inner"><span>write-value-as-bytes</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-write-value-as-string"><div class="inner"><span>write-value-as-string</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-WriteValue"><div class="inner"><span>WriteValue</span></div></a></li><li class="depth-2"><a href="jsonista.core.html#var--write-value"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-write-value</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jsonista.core</h1><div class="doc"><div class="markdown"><p>JSON encoding and decoding based on Jackson Databind.</p>
<p>Encoding example:</p>
<pre><code>(require '[jsonista.core :as json])
(json/write-value-as-string {:hello 1})
;; =&gt; "{\"hello\":1}"
</code></pre>
<p>Decoding example:</p>
<pre><code>(def +data+ (json/write-value-as-string {:foo "bar"}))
(json/read-value +data+)
;; =&gt; {"foo" "bar"}
</code></pre>
<h2><a href="#configuration" name="configuration"></a>Configuration</h2>
<p>You can configure encoding and decoding by creating a custom mapper object with jsonista.core/object-mapper. The options are passed in as a map.</p>
<p>For example, to convert map keys into keywords while decoding:</p>
<pre><code>(json/from-json +data+ (json/object-mapper {:decode-key-fn true}))
;; =&gt; {:foo "bar"}
</code></pre>
<p>See the docstring of <a href="jsonista.core.html#var-object-mapper">object-mapper</a> for all available options.</p>
<h2><a href="#custom-encoders" name="custom-encoders"></a>Custom encoders</h2>
<p>Custom encoder is a function that take a value and a JsonGenerator object as the parameters. The function should call JsonGenerator methods to emit the desired JSON. This is the same as how custom encoders work in Cheshire.</p>
<p>Custom encoders are configured by the object-mapper option :encoders, which is a map from types to encoder functions.</p>
<p>For example, to encode java.awt.Color:</p>
<pre><code> (let [encoders {java.awt.Color (fn [color gen] (.writeString gen (str color)))}
       mapper (json/object-mapper {:encoders encoders})]
   (json/write-value-as-string (java.awt.Color. 1 2 3) mapper))
 ;; =&gt; "\"java.awt.Color[r=1,g=2,b=3]\""
</code></pre>
<h2><a href="#jsonista-vs-cheshire" name="jsonista-vs-cheshire"></a>Jsonista vs. Cheshire</h2>
<p>jsonista uses Jackson Databind while Cheshire uses Jackson Core. In our benchmarks, jsonista performs better than Cheshire (take look at json_perf_test.clj). On the other hand, Cheshire has a wider set of features and has been used in production much more.</p></div></div><div class="public anchor" id="var-.2Bdefault-mapper.2B"><h3>+default-mapper+</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The default ObjectMapper instance.</p></div></div></div><div class="public anchor" id="var-object-mapper"><h3>object-mapper</h3><div class="usage"><code>(object-mapper)</code><code>(object-mapper options)</code></div><div class="doc"><div class="markdown"><p>Create an ObjectMapper with Clojure support.</p>
<p>The optional first parameter is a map of options. The following options are available:</p>
<table>
  <thead>
    <tr>
      <th colspan="2">Encoding options </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>:pretty</code> </td>
      <td>set to true use Jacksons pretty-printing defaults </td>
    </tr>
    <tr>
      <td><code>:escape-non-ascii</code> </td>
      <td>set to true to escape non ascii characters </td>
    </tr>
    <tr>
      <td><code>:date-format</code> </td>
      <td>string for custom date formatting. default: <code>yyyy-MM-dd'T'HH:mm:ss'Z'</code> </td>
    </tr>
    <tr>
      <td><code>:encode-key-fn</code> </td>
      <td>true to coerce keyword keys to strings, false to leave them as keywords, or a function to provide custom coercion (default: true) </td>
    </tr>
    <tr>
      <td><code>:encoders</code> </td>
      <td>a map of custom encoders where keys should be types and values should be encoder functions </td>
    </tr>
  </tbody>
</table>
<p>Encoder functions take two parameters: the value to be encoded and a JsonGenerator object. The function should call JsonGenerator methods to emit the desired JSON.</p>
<table>
  <thead>
    <tr>
      <th>Decoding options </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>:decode-key-fn</code> </td>
      <td>true to coerce keys to keywords, false to leave them as strings, or a function to provide custom coercion (default: false) </td>
    </tr>
  </tbody>
</table></div></div></div><div class="public anchor" id="var-read-value"><h3>read-value</h3><div class="usage"><code>(read-value object)</code><code>(read-value object mapper)</code></div><div class="doc"><div class="markdown"><p>Decodes a value from a JSON string from anything that satisfies <a href="jsonista.core.html#var-ReadValue">ReadValue</a> protocol. By default, File, URL, String, Reader and InputStream are supported.</p>
<p>To configure, pass in an ObjectMapper created with <a href="jsonista.core.html#var-object-mapper">object-mapper</a>, or pass in a map with options. See <a href="jsonista.core.html#var-object-mapper">object-mapper</a> docstring for the available options.</p></div></div></div><div class="public anchor" id="var-ReadValue"><h3>ReadValue</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--read-value"><h3>-read-value</h3><div class="usage"><code>(-read-value this mapper)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div></div><div class="public anchor" id="var-write-value"><h3>write-value</h3><div class="usage"><code>(write-value to object)</code><code>(write-value to object mapper)</code></div><div class="doc"><div class="markdown"><p>Encode a value as JSON and write using the provided <a href="jsonista.core.html#var-WriteValue">WriteValue</a> instance. By default, File, OutputStream, DataOutput and Writer are supported.</p>
<p>To configure, pass in an ObjectMapper created with <a href="jsonista.core.html#var-object-mapper">object-mapper</a>, or pass in a map with options. See <a href="jsonista.core.html#var-object-mapper">object-mapper</a> docstring for the available options.</p></div></div></div><div class="public anchor" id="var-write-value-as-bytes"><h3>write-value-as-bytes</h3><div class="usage"><code>(write-value-as-bytes object)</code><code>(write-value-as-bytes object mapper)</code></div><div class="doc"><div class="markdown"><p>Encode a value as a JSON byte-array.</p>
<p>To configure, pass in an ObjectMapper created with <a href="jsonista.core.html#var-object-mapper">object-mapper</a>.</p></div></div></div><div class="public anchor" id="var-write-value-as-string"><h3>write-value-as-string</h3><div class="usage"><code>(write-value-as-string object)</code><code>(write-value-as-string object mapper)</code></div><div class="doc"><div class="markdown"><p>Encode a value as a JSON string.</p>
<p>To configure, pass in an ObjectMapper created with <a href="jsonista.core.html#var-object-mapper">object-mapper</a>.</p></div></div></div><div class="public anchor" id="var-WriteValue"><h3>WriteValue</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--write-value"><h3>-write-value</h3><div class="usage"><code>(-write-value this value mapper)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div></div></div></body></html>