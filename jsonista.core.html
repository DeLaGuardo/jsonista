<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jsonista.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jsonista</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="jsonista.core.html"><div class="inner"><span>jsonista.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jsonista.core.html#var-.2Bdefault-mapper.2B"><div class="inner"><span>+default-mapper+</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-from-json"><div class="inner"><span>from-json</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-make-mapper"><div class="inner"><span>make-mapper</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-to-json"><div class="inner"><span>to-json</span></div></a></li><li class="depth-1"><a href="jsonista.core.html#var-write-to"><div class="inner"><span>write-to</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jsonista.core</h1><div class="doc"><pre class="plaintext">JSON encoding and decoding based on Jackson Databind.

Encoding example:

  (require '[jsonista.core :as json])
  (json/to-json {:hello 1})
  ;; =&gt; "{\"hello\":1}"

Decoding example:

  (def +data+ (json/to-json {:foo "bar"}))
  (json/from-json +data+)
  ;; =&gt; {"foo" "bar"}

CONFIGURATION

You can configure encoding and decoding by creating a custom mapper object
with jsonista.core/make-mapper. The options are passed in as a map.

For example, to convert map keys into keywords while decoding:

  (json/from-json +data+ (json/make-mapper {:keywordize? true}))
  ;; =&gt; {:foo "bar"}

See the docstring of jsonista.json/make-mapper for all available options.

CUSTOM ENCODERS

Custom encoder is a function that take a value and a JsonGenerator object as
the parameters. The function should call JsonGenerator methods to emit the
desired JSON. This is the same as how custom encoders work in Cheshire.

Custom encoders are configured by the make-mapper option :encoders, which is a
map from types to encoder functions.

For example, to encode java.awt.Color:

   (let [encoders {java.awt.Color (fn [color gen] (.writeString gen (str color)))}
         mapper (json/make-mapper {:encoders encoders})]
     (json/to-json (java.awt.Color. 1 2 3) mapper))
   ;; =&gt; "\"java.awt.Color[r=1,g=2,b=3]\""

JSONISTA VS CHESHIRE

jsonista uses Jackson Databind while Cheshire uses Jackson Core. In our
benchmarks, jsonista performs better than Cheshire (take look at
json_perf_test.clj). On the other hand, Cheshire has a wider set of features
and has been used in production much more.</pre></div><div class="public anchor" id="var-.2Bdefault-mapper.2B"><h3>+default-mapper+</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The default ObjectMapper instance used by jsonista.core/to-json and
jsonista.core/from-json unless you pass in a custom one.</pre></div></div><div class="public anchor" id="var-from-json"><h3>from-json</h3><div class="usage"><code>(from-json data)</code><code>(from-json data opts-or-mapper)</code></div><div class="doc"><pre class="plaintext">Decode a value from a JSON string or InputStream.

To configure, pass in an ObjectMapper created with make-mapper, or pass in a map with options.
See make-mapper docstring for available options</pre></div></div><div class="public anchor" id="var-make-mapper"><h3>make-mapper</h3><div class="usage"><code>(make-mapper)</code><code>(make-mapper options)</code></div><div class="doc"><pre class="plaintext">Create an ObjectMapper with Clojure support.

The optional first parameter is a map of options. The following options are
available:
Encoding options: 
:pretty           -- set to true use Jacksons pretty-printing defaults
:escape-non-ascii -- set to true to escape non ascii characters
:date-format      -- string for custom date formatting. If not set will use default "yyyy-MM-dd'T'HH:mm:ss'Z'"
:encoders     --  a map of custom encoders where keys should be types and values
                  should be encoder functions
Encoder functions take two parameters: the value to be encoded and a
JsonGenerator object. The function should call JsonGenerator methods to emit
the desired JSON.
Decoding options:
:keywordize?  --  set to true to convert map keys into keywords (default: false)</pre></div></div><div class="public anchor" id="var-to-json"><h3>to-json</h3><div class="usage"><code>(to-json object)</code><code>(to-json object opts-or-mapper)</code></div><div class="doc"><pre class="plaintext">Encode a value as a JSON string.

To configure, pass in an ObjectMapper created with make-mapper, or pass in a map with options.
See make-mapper docstring for available options</pre></div></div><div class="public anchor" id="var-write-to"><h3>write-to</h3><div class="usage"><code>(write-to object writer)</code><code>(write-to object writer mapper)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>